# FLOW.md

## 🎯 מטרת האפליקציה

לומדה אינטראקטיבית להעלאת מודעות בנושא **אבטחת מידע** בקרב עובדי הארגון.  
המערכת תאפשר לכל עובד לעקוב אחרי התקדמותו, לגשת לתכנים לימודיים מגוונים (מבחנים, סימולציות, סרטונים) ולצפות בסטטיסטיקות אישיות.

---

## 🧭 תרשים זרימה כללי (FLOW)

1. **מסך פתיחה - הקשת קוד אישי**
   - המשתמש נדרש להזין קוד אישי (לצורך זיהוי).
   - בדיקת תקינות הקוד מול בסיס הנתונים.
     - אם הקוד תקין – מעבר לעמוד "ההתקדמות שלי".
     - אם הקוד שגוי – תופיע הודעת שגיאה עם אפשרות לנסות שוב.

2. **מסך "ההתקדמות שלי"**
   - הצגת מצב ההתקדמות של המשתמש בלומדה:
     - מספר הלומדות שהושלמו.
     - מספר הלומדות שטרם בוצעו.
     - תאריך ושעה של ההתחברות האחרונה.
     - קישור ישיר להמשך הלומדה ממקום העצירה האחרון.

3. **גישה לתכנים נוספים**
   - מהמסך הראשי ניתן לגשת ל:
     - בלוקים של לומדות אחרות (יחידות נפרדות).
     - צפייה בסרטונים.
     - ביצוע סימולציות.
     - מענה על מבחנים.

4. **מסך סטטיסטיקה**
   - עמוד ייעודי להצגת סטטיסטיקות המשתמש:
     - אחוז התקדמות כללי.
     - כמה לומדות מתוך כלל הלומדות בוצעו.
     - אילו נושאים עדיין לא נלמדו.
     - ציונים במבחנים / תוצאות הסימולציות.

---

## 🧱 מבנה עמודים (Pages)

| מסך | תיאור | רכיבים עיקריים |
|-----|--------|----------------|
| `LoginPage` | הזנת קוד אישי | שדה טקסט, כפתור התחברות, הודעות שגיאה |
| `ProgressPage` | ההתקדמות שלי | רשימת לומדות, סטטוס התקדמות, כפתור "המשך מכאן" |
| `LMSBlocksPage` | בלוקים של לומדות | רשימת נושאים, קישורים לסרטונים, סימולציות, מבחנים |
| `StatisticsPage` | סטטיסטיקות אישיות | גרפים/תרשימים, נתונים מספריים |

---

## 🧠 לוגיקת המשכיות

- כל משתמש שמזין קוד אישי יזוהה ויופנה לנקודה שבה הפסיק לאחרונה.
- סימון לומדות כ"בוצעו" יתבצע באופן אוטומטי לאחר השלמת יחידה.
- תיתכן אפשרות לחזור ליחידות שכבר הושלמו לצורך רענון.

---

## ✅ דגשים חשובים

- האפליקציה צריכה להיות רספונסיבית (מותאמת למובייל ודסקטופ).
- שמירה אוטומטית של התקדמות המשתמש.
- ממשק נוח וברור לעובדים בכל רמת ידע טכנולוגית.
- תיעוד הפעולות של המשתמש למטרות בקרה ושיפור.

---

## 🛠 טכנולוגיות בשימוש בפיתוח

- **Frontend**: React (JavaScript בלבד, ללא TypeScript)
- **Backend**: Firebase Functions
- **Database**: Firestore (NoSQL)

---

בהצלחה בפיתוח! 🚀

---

## 📊 מבנה בסיס הנתונים (Firestore Schema)

### Collection: users
```javascript
{
  id: string (auto),                // קוד אישי של המשתמש
  personalCode: string,             // קוד אישי לכניסה למערכת
  lastLoginAt: timestamp,           // תאריך התחברות אחרון
  lastCompletedBlockId: string,     // מזהה הבלוק האחרון שהושלם
  progress: {
    completedBlocks: number,        // מספר בלוקים שהושלמו
    totalBlocks: number,           // סך כל הבלוקים
    lastPosition: string           // מיקום אחרון בלומדה
  }
}
```

### Collection: blocks
```javascript
{
  id: string (auto),               // מזהה הבלוק
  title: string,                   // כותרת הבלוק
  type: string,                    // סוג (video/simulation/quiz)
  content: {
    url?: string,                  // URL לסרטון (אם רלוונטי)
    questions?: array,             // שאלות למבחן (אם רלוונטי)
    simulationData?: object        // נתוני סימולציה (אם רלוונטי)
  },
  order: number,                   // סדר הצגת הבלוקים
  requiredForCompletion: boolean   // האם נדרש להשלמת הלומדה
}
```

### Collection: progress
```javascript
{
  id: string (auto),
  userId: string,                  // מזהה המשתמש
  blockId: string,                 // מזהה הבלוק
  completed: boolean,              // האם הושלם
  score?: number,                  // ציון (אם רלוונטי)
  completedAt: timestamp,          // מועד השלמה
  attempts: number                 // מספר ניסיונות
}
```

### Collection: statistics
```javascript
{
  id: string (auto),
  userId: string,                  // מזהה המשתמש
  totalTimeSpent: number,          // זמן כולל בלומדה (בדקות)
  averageScore: number,            // ממוצע ציונים
  lastUpdated: timestamp,          // עדכון אחרון
  blockStatistics: {
    [blockId]: {
      attempts: number,            // מספר ניסיונות לבלוק
      bestScore: number,          // ציון הטוב ביותר
      timeSpent: number           // זמן שהושקע בבלוק
    }
  }
}
```

### Collection: activityLogs
```javascript
{
  id: string (auto),
  userId: string,                  // מזהה המשתמש
  action: string,                  // סוג הפעולה
  blockId?: string,                // מזהה הבלוק (אם רלוונטי)
  timestamp: timestamp,            // מועד הפעולה
  details: {
    previousState?: string,        // מצב קודם
    newState?: string,             // מצב חדש
    metadata?: object              // מידע נוסף
  }
}
```
